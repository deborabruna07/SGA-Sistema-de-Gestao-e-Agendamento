<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>√Årea do Administrador</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
</head>
<body>

<div class="admin-container">

    <h1>√Årea do Administrador</h1>

   <div class="admin-card">
    <h2>Cadastrar Servi√ßo</h2>

    <form method="post" action="/servico" class="admin-form">
        <input type="text" name="nome" placeholder="Nome do servi√ßo" required>
        <input type="number" name="ativo1" placeholder="Tempo ativo 1 (min)" required>
        <input type="number" name="espera" placeholder="Tempo de espera (min)" value="0" required>
        <input type="number" name="ativo2" placeholder="Tempo ativo 2 (min)" value="0" required>

        <button type="submit" class="btn-admin">
            Cadastrar Servi√ßo
        </button>
    </form>
</div>

<!-- LISTA DE SERVI√áOS -->
<div class="admin-card">
    <h2>Servi√ßos Cadastrados</h2>

    {% if servicos %}
        <table class="admin-table">
            <tr>
                <th>Servi√ßo</th>
                <th>A√ß√£o</th>
            </tr>

            {% for s in servicos %}
            <tr>
                <td>{{ s[1] }}</td>
                <td>
                    <a href="/remover-servico/{{ s[0] }}"
                    onclick="return confirm('Tem certeza que deseja remover este servi√ßo?')"
                    class="link-remover">
                        ‚ùå Remover
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>Nenhum servi√ßo cadastrado.</p>
    {% endif %}
</div>

    <!-- AGENDAMENTOS -->
    <div class="admin-card">
        <h2>Agendamentos</h2>

        <table class="admin-table">
            <thead>
                <tr>
                    <th>Cliente</th>
                    <th>Servi√ßo</th>
                    <th>Data</th>
                    <th>In√≠cio</th>
                    <th>Fim</th>
                    <th>Status</th>
                    <th>A√ß√£o</th>
                </tr>
            </thead>
            <tbody>
                {% for a in agendamentos %}
                <tr>
                    <td>{{ a[1] }}</td>
                    <td>{{ a[2] }}</td>
                    <td>{{ a[3] }}</td>
                    <td>{{ a[4] }}</td>
                    <td>{{ a[5] }}</td>
                    <td>{{ a[6] }}</td>
                    <td>
                        {% if a[6] == "Confirmado" %}
                            <a href="/cancelar/{{ a[0] }}" class="link-cancelar">
                                Cancelar
                            </a>
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- LIMPAR TUDO -->
    <div class="admin-card perigo">
        <div class="alerta-admin">
            ‚ö†Ô∏è Aten√ß√£o: esta a√ß√£o apagar√° TODOS os agendamentos do sistema.
        </div>

        <a href="/limpar-tudo"
        onclick="return confirm('‚ö†Ô∏è Tem certeza que deseja apagar TODOS os agendamentos?')">
            <button class="btn-admin btn-danger">
                üßπ Limpar todos os agendamentos
            </button>
        </a>
    </div>

    <!-- MENSAGENS (S√ì ADMIN) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% for categoria, mensagem in messages %}
            {% if categoria == "admin" %}
                <p class="msg-admin">{{ mensagem }}</p>
            {% endif %}
        {% endfor %}
    {% endwith %}

</div>

</body>
</html>
